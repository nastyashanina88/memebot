# Meme Bot

Бот мониторит Telegram-каналы, отбирает лучшие мемы через AI и постит в твой канал.

---

## Установка

### 1. Python

Нужен Python 3.10+. Проверь: `python --version`
Скачать: https://www.python.org/downloads/

### 2. Зависимости

```bash
pip install -r requirements.txt
```

### 3. Получи ключи

**Telegram API ID и API Hash:**
1. Зайди на https://my.telegram.org
2. Войди под своим номером телефона
3. → "API development tools"
4. Создай приложение (название любое)
5. Скопируй `App api_id` и `App api_hash`

**Anthropic API Key:**
1. Зайди на https://console.anthropic.com
2. → "API Keys" → "Create Key"
3. Скопируй ключ (начинается с `sk-ant-`)

### 4. Создай файл .env

Скопируй `.env.example` → `.env` и заполни:

```
API_ID=12345678
API_HASH=abcdef...
ANTHROPIC_API_KEY=sk-ant-...
MY_CHANNEL=@my_memes_channel
```

### 5. Добавь бота в канал

Поскольку бот постит от имени твоего аккаунта — **добавь свой аккаунт как администратора** канала с правом публикации постов.

---

## Запуск

```bash
python bot.py
```

**При первом запуске** Telegram попросит ввести номер телефона и код из SMS — это нормально.
После этого создастся файл `session.session` — он сохраняет авторизацию, больше вводить не надо.

---

## Настройка

Все настройки вверху файла `bot.py`:

| Параметр | По умолчанию | Описание |
|----------|-------------|----------|
| `SOURCE_CHANNELS` | 3 канала | Откуда брать мемы |
| `POSTS_PER_DAY_MIN/MAX` | 7–10 | Сколько постов в день |
| `POST_START_HOUR` | 9 | С какого часа (МСК) |
| `POST_END_HOUR` | 22 | До какого часа (МСК) |
| `MIN_SCORE` | 20 | Минимум реакций+комментов |
| `MAX_CAPTION_LEN` | 150 | Максимальная длина подписи |
| `FETCH_INTERVAL` | 3600 | Как часто проверять каналы (сек) |

---

## Как работает

```
Каждый час: проверяет SOURCE_CHANNELS → берёт посты с score ≥ MIN_SCORE
               ↓
           Быстрая проверка текста (длина, слова-рекламы)
               ↓
           Claude AI смотрит на картинку и подпись → ДА / НЕТ
               ↓
           Одобренные → база данных (memes.db)
               ↓
По расписанию (7–10 раз в день, 9:00–22:00 МСК):
           Берёт лучший мем из базы → постит в MY_CHANNEL
```
